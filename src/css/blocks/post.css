.post {
	--measure: 55ch;

	h1 {
		font-size: var(--size-step-3-4);
		line-height: var(--leading-tight);

		@media (--md-n-above) {
			line-height: var(--leading-flat);
		}
	}

	h2,
	h3 {
		line-height: var(--leading-snug);
	}

	h2 {
		font-size: var(--size-step-1);
	}

	h3 {
		font-size: var(--size-step-0);
	}

	pre {
		padding: var(--space-2xs) var(--space-s);
		border: var(--border-thickness-1) solid transparent;
		border-radius: var(--border-radius-1);
		tab-size: 2;
		-webkit-font-smoothing: antialiased;

		&:focus-visible {
			outline: var(--border-thickness-2) solid var(--color-brand);
			outline-offset: calc(3 * var(--focus-ring-offset));
		}
	}

	code {
		font-family: var(--font-monospace);
		font-size: 0.875em;
		letter-spacing: -0.025em;
	}

	:not(pre) > code {
		padding: var(--space-5xs) var(--space-3xs);
		border-radius: var(--border-radius-1);
		background-color: var(--color-bg-3);
	}
}

.post {
	details {
		max-inline-size: fit-content;
	}

	[open]:before {
		content: '';
		position: absolute;
		inset-inline-start: 0.5ch;
		inset-block-start: 0;
		inline-size: var(--border-thickness-1);
		block-size: calc(100% - (var(--leading-normal) - 1) * 0.5lh);
		background-image: linear-gradient(
			to bottom,
			transparent 1lh,
			var(--color-underline) 1lh
		);
	}

	summary {
		/* padding-block: var(--space-4xs); */
		border-radius: var(--border-radius-1);
	}

	summary::-webkit-details-marker,
	summary::marker {
		content: '';
		display: none;
	}

	summary::before {
		content: '▲';
		content: '▲' / '';
		display: inline-block;
		background-color: var(--color-bg-inverted-1);
		font-size: var(--size-step-000);
		rotate: 90deg;
	}

	[open] summary::before {
		rotate: 180deg;
		translate: 0 -15%;
	}

	summary + * {
		margin-inline-start: 1em;
	}
}

.post-tag-list + * {
	--flow-space: var(--space-3xs);
}

.post-tag-list[open] + * {
	--flow-space: var(--space-xs);
}

.post-description {
	--flow-space: 1ex;
	text-wrap: pretty;

	@media (--md-n-above) {
		text-wrap: balance;
	}
}

.post-featured-img {
	margin-block-start: calc(-1 * var(--space-2xs-xs));

	&:before {
		content: '';
		position: absolute;
		inset-block-start: 0;
		inset-inline-start: 0;
		block-size: var(--space-3xl);
		inline-size: 100%;
		background: var(--color-bg-inverted-1);
		z-index: -1;
	}

	img {
		box-shadow: var(--shadow-2);
		outline: var(--border-thickness-1) solid var(--color-border-3);
	}

	+ * {
		--region-start-space: var(--space-l-xl);
	}
}

.post .hero-inner,
.post-body {
	display: grid;
	grid-template-columns:
		minmax(0, var(--measure))
		minmax(0, 1fr) minmax(0, 1fr);
}

.post .hero-inner > * {
	grid-column: 1/3;
}

.post .hero-inner > hr {
	grid-column: 1/4;
}

.post-body > * {
	grid-column: 1/2;
}

.post-body > p:has(img) {
	min-inline-size: calc(100% + (2 * var(--page-gutter)));
	margin-inline-start: calc(-1 * var(--page-gutter));

	@media (--sm-n-above) {
		grid-column: 1/3;
		min-inline-size: 100%;
		margin-inline-start: unset;
	}
}

.post-body img {
	margin-inline: auto;

	@media (--sm-n-above) {
		margin-inline: unset;
	}
}

.post-tag-list a {
	padding-inline: var(--space-5xs);
}

/* @supports (initial-letter: 2) or (-webkit-initial-letter: 2) {
	.post-body > :first-child::first-letter {
		margin-inline-end: var(--space-3xs-2xs);
		-webkit-initial-letter: 2;
		initial-letter: 2;
		color: var(--color-text-2);
		font-weight: var(--font-bold);
	}
} */
