[href='#main'] {
	--_padding-block: 0.5em;
	--_padding-inline: 0.75em;
	position: absolute;
	inset-block-start: 0;
	inset-inline-start: var(--page-gutter);

	padding: var(--_padding-block) var(--_padding-inline);
	border-radius: var(--border-radius-1);
	font-size: var(--primary-nav-font-size);
	opacity: 0;
	transform: translateY(calc(-100% - var(--border-thickness-2)));
	z-index: 1000;
	transition:
		transform var(--transition-base),
		opacity var(--transition-base);

	&:focus-visible {
		opacity: 1;
		inset-block-start: calc(
			var(--primary-nav-padding-block) - var(--_padding-block)
		);
		outline-color: var(--color-brand-inverted);
		transform: translateY(0);
	}
}

.site-header {
	position: sticky;
	inset-block-end: 0;
	background: var(--color-bg-1);
	outline: var(--site-header-border-thickness) solid var(--color-border-1);

	order: 2;
	z-index: 999;

	&:before {
		content: '';
		position: absolute;
		inset-inline-start: 0;
		inset-block-end: 0;
		inline-size: 100%;
		block-size: 200%;
		background-image: linear-gradient(
			to top,
			var(--color-bg-1) 50%,
			transparent
		);
		z-index: -1;
		pointer-events: none;
	}
}

.site-nav ul {
	--gutter: var(--space-5xs);
	flex-wrap: nowrap;
	margin-inline-start: calc(-1 * var(--primary-nav-padding-inline));

	a {
		position: relative;
		display: inline-block;
		padding: var(--primary-nav-padding-block) var(--primary-nav-padding-inline);
		font-size: var(--primary-nav-font-size);
		line-height: var(--primary-nav-leading);
		/* z-index: 1; */

		&:before {
			content: '';
			position: absolute;
			inset: calc(0.75 * var(--primary-nav-padding-block))
				calc(0.5 * var(--primary-nav-padding-inline));
			border-radius: var(--border-radius-1);
			transition: outline-offset var(--transition-base);
			/* z-index: -1; */
		}

		&:after {
			--text-decoration-size: var(--border-thickness-1);
			content: '';
			position: absolute;

			inset-inline-start: 50%;
			inset-block-start: 0;
			inline-size: var(--text-decoration-size);
			block-size: calc(0.5 * var(--primary-nav-padding-block));
			translate: -50% 0;
			/* z-index: 2; */
			transition: background-color var(--transition-base);
		}

		&:hover:after {
			background-color: var(--color-underline);
		}

		&:focus-visible {
			outline: none;
		}

		&:focus-visible:before {
			outline: var(--border-thickness-2) solid var(--color-brand-inverted);
			outline-offset: var(--focus-ring-offset);
		}
	}
}

.site-nav :where([aria-current='page'], [data-state='active']):after {
	background-color: var(--color-underline);
}

@media (--forcedColors) {
	.site-nav ul a:after,
	.site-nav ul a:hover:after {
		background-color: transparent;
	}

	.site-nav ul :is([aria-current='page'], [data-state='active']):after {
		--text-decoration-size: var(--border-thickness-2);
	}
}

/* WCAG 1.4.4 Resize Text (Level AA) */
@media (max-width: 20rem) {
	.site-header {
		overflow-x: auto;
		overflow-y: hidden;
	}
}
