[href='#main'] {
	position: absolute;
	inset-block-start: 0;
	inset-inline-start: var(--page-gutter);

	padding: var(--button-padding-block) var(--button-padding-inline);
	border-radius: var(--border-radius-1);
	font-size: var(--primary-nav-font-size);
	opacity: 0;
	transform: translateY(calc(-100% - var(--border-thickness-2)));
	z-index: 1000;
	transition:
		transform var(--transition-base),
		opacity var(--transition-base);

	&:focus-visible {
		opacity: 1;
		inset-block-start: calc(
			var(--primary-nav-padding-block) - var(--button-padding-block)
		);
		outline-color: var(--color-brand-inverted);
		transform: translateY(0);
	}
}

.site-header {
	order: 4;
	position: sticky;
	inset-block-end: 0;
	-webkit-backdrop-filter: blur(0.66rem);
	backdrop-filter: blur(0.66rem);
	background: var(--color-bg-site-header);
	outline: var(--site-header-border-thickness) solid var(--color-border-1);
	overflow-x: auto;
	overflow-y: hidden;
	z-index: 999;
	transition: background var(--transition-base);
}

.site-nav ul {
	--gutter: var(--space-5xs);
	flex-wrap: nowrap;
	margin-inline-start: calc(-1 * var(--primary-nav-padding-inline));

	a {
		position: relative;
		display: inline-block;
		padding: var(--primary-nav-padding-block) var(--primary-nav-padding-inline);
		font-size: var(--primary-nav-font-size);
		line-height: var(--primary-nav-leading);

		&:before {
			content: '';
			position: absolute;
			inset: calc(0.75 * var(--primary-nav-padding-block))
				calc(0.5 * var(--primary-nav-padding-inline));
			border-radius: var(--border-radius-1);
			transition: outline-offset var(--transition-base);
			/* z-index: -1; */
		}

		&:after {
			--text-decoration-size: var(--border-thickness-1);
			content: '';
			position: absolute;

			inset-inline-start: 50%;
			inset-block-start: 0;
			inline-size: var(--text-decoration-size);
			block-size: calc(0.5 * var(--primary-nav-padding-block));
			background-color: var(--color-underline);
			transform: scaleY(0);
			transform-origin: top;
			translate: -50% 0;
			transition: transform var(--transition-base);
		}

		@media (--mouse) {
			&:hover:after {
				transform: scaleY(1);
			}
		}

		&:focus-visible {
			outline: none;
		}

		&:focus-visible:before {
			outline: var(--border-thickness-2) solid var(--color-brand-inverted);
			outline-offset: var(--focus-ring-offset);
		}
	}
}

.site-nav :is([aria-current='page'], [data-state='active']):after {
	transform: scaleY(1);
}

@media (--forcedColors) {
	.site-nav ul a:after,
	.site-nav ul a:hover:after {
		background-color: transparent;
	}

	.site-nav ul :is([aria-current='page'], [data-state='active']):after {
		--text-decoration-size: var(--border-thickness-2);
	}
}
