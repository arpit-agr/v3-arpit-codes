---
import Layout from '../layouts/Layout.astro';
import {findMatchingItem} from '../utils/findMatchingItem.js';
import pageData from '../data/pages.json';
import HeroSection from '../components/HeroSection.astro';
import {getCollection} from 'astro:content';

const pageInfo = findMatchingItem(Astro.url.pathname, pageData);
const pageTitle = pageInfo.title;
const pageDesc = pageInfo.description;
const allDesignPrinciples = await getCollection('designPrinciples');
---

<Layout title={pageTitle} description={pageDesc}>
	<main id="main">
		<HeroSection>
			<h1>{pageTitle}</h1>
			<p class="text-balance">{pageDesc}</p>
		</HeroSection>
		<article class="flow region wrapper">
			<dl class="design-principles-list grid" role="list">
				{
					allDesignPrinciples.map(async entry => {
						const {Content} = await entry.render();

						return (
							<div class="principle-entry grid">
								<dt class="heading-5">
									<a href={entry.data.url}>{entry.data.title}</a>
								</dt>
								<dd class="principle-description text-balance">
									{entry.data.description}
								</dd>
								<dd class="principle-content flow flow-space-s">
									<Content />
								</dd>
							</div>
						);
					})
				}
			</dl>
		</article>
	</main>
</Layout>
