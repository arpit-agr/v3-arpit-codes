---
import Layout from '../layouts/Layout.astro';
import {findMatchingItem} from '../utils/findMatchingItem.js';
import pageData from '../data/pages.json';
import HeroSection from '../components/HeroSection.astro';
import CircleVector from '../components/CircleVector.astro';
import ProjectsShowcase from '../components/ProjectsShowcase.astro';
import PostList from '../components/PostList.astro';
import {reversedBlogPosts} from '../data/reversedBlogPosts.js';

const pageInfo = findMatchingItem(Astro.url.pathname, pageData);
const pageTitle = pageInfo.title;
const pageDesc = pageInfo.description;
const hindiTranslation = 'अर्पित अग्रवाल';
const urduTranslation = 'اَرپِت اگروال';
const projectsTitle = 'Projects';
const projectsDescription =
	'Browse a selection of my past projects, showcasing my web design and development capabilities';
const displayedPosts = reversedBlogPosts.slice(0, 4);
---

<Layout title={pageTitle} description={pageDesc}>
	<main id="main" tabindex="-1">
		<HeroSection>
			<div class="homepage-heading stack">
				<h1>{pageTitle}</h1>
				<p class="translations cluster" aria-hidden="true">
					<span lang="hi">{hindiTranslation}</span>
					<span class="text-color-inverted-3">•</span>
					<span lang="ur" dir="rtl">{urduTranslation}</span>
				</p>
			</div>
			<p class="intro text-step-1 leading-snug text-balance flow-space-xs">
				{pageDesc}
			</p>
			<p class="flow-space-xs">
				You can reach me at
				<a href="mailto:hello@arpit.codes" class="hero-email">
					<span>hello@arpit.codes</span>
					<CircleVector />
				</a>.
			</p>
		</HeroSection>
		<article id="projects" class="flow region" tabindex="-1">
			<div class="flow relative wrapper">
				<h2 class="heading-3 leading-flat">{projectsTitle}</h2>
				<p class="text-balance flow-space-xs">
					{projectsDescription}
				</p>
			</div>
			<ProjectsShowcase />
		</article>
		<article id="latest-posts" class="region wrapper" tabindex="-1">
			<PostList postsCollection={displayedPosts}>
				<div class="list-header cluster">
					<h2 class="heading-3 leading-flat">Latest Posts</h2>
					<a class="small-text font-medium" href="/blog/">
						View All <span class="visually-hidden">posts</span>
					</a>
				</div>
			</PostList>
		</article>
	</main>
</Layout>
